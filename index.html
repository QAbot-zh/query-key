<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>API CHECKER</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="API CHECKER by rick and megasoft">
    <meta name="keywords" content="API CHECKER , rick, megasoft,DEV API, LINUXDO">
    <link rel="icon" href="./logo.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/layui/2.6.8/css/layui.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/layui/2.6.8/layui.min.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px 10px;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            display: flex;
            flex-direction: column;
            margin: auto;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 580px;
        }

        .response-container {
            width: 90%;
            margin: 20px auto 0;
            max-width: 1000px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            font-size: 16px;

        }

        input[type="text"], textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            box-sizing: border-box;
        }

        textarea {
            resize: vertical;
            height: 100px;
        }
        .button-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 10px;
            gap: 20px;
        }
        .button {
            padding: 5px 10px;
            font-size: 14px;
            border-radius: 3px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .styled-button {
            background-color: #4CAF50; /* é»˜è®¤æŒ‰é’®é¢œè‰²ï¼šç»¿è‰² */
            color: white;
        }
        .styled-button:hover {
            background-color: #f44336; /* é¼ æ ‡æ‚¬åœé¢œè‰² */
        }

        .submit-container {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .submit-container input[type="button"], .copy-btn {
            width: 30%;
            padding: 10px;
            border: none;
            cursor: pointer;
            margin-top: 10px;
            margin-right: 15px;
            margin-left: 15px;
        }


        .copy-container {
            display: flex;
            justify-content: flex-end;
            flex-wrap: wrap;
        }

        .copy-container button.copy-all-btn {
            width: auto;
            padding: 10px 15px;
            border: none;
            cursor: pointer;
            margin-top: 10px;
            margin-left: 10px;
            background-color: #4CAF50;
            color: white;
            border-radius: 4px;
        }

        .copy-container button.copy-all-btn:hover {
            background-color: #45a049;
        }

        .submit-query {
            background-color: #007bff;
            color: white;
        }

        .check-quota {
            background-color: #28a745;
            color: white;
        }

        .clear-form {
            background-color: #dc3545;
            color: white;
        }

        .model-input-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .model-input-container input[type="text"] {
            margin-right: 10px;
        }

        .model-input-container textarea[type="text"] {
            width: 70%;
            height: 130px;
            margin-right: 10px;
        }

        .model-input-container input[type="button"] {
            width: 28%;
            background-color: #fe9307;
            color: white;
            border: none;
            cursor: pointer;
        }

        h1 {
            font-weight: bold;
        }

        h2, h3 {
            margin-top: 20px;
            text-align: center;
        }

        .response-container pre {
            white-space: pre-wrap;
            border: 1px solid #ddd;
            padding: 10px;
            background-color: #f9f9f9;
            margin-bottom: 20px;
        }

        .model-timeout-concurrency {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            margin-bottom: 15px
        }

        .model-timeout, .model-concurrency {
            height: 35px;
            width: 40%;
        }

        .model-timeout input, .model-concurrency input {
            width: 100%;
            height: 25px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
            vertical-align: middle;
        }

        th {
            background-color: #f2f2f2;
        }


        h1, h2 {
            color: #007bff;
            text-align: center;
        }

        .td1 {
            width: 250px;
        }

        .td1-ok {
            color: green;
        }

        .td1-no {
            color: coral;
        }

        .td1-error {
            color: red;
        }

        .td2 {
            width: 200px;
        }

        .td4 {
            max-width: 350px;
            max-height: 100px;
        }


        .td3 {
            width: 100px;
        }

        .copy-buttons {
            margin: 10px 0;
        }

        button {
            border-radius: 5px;
        }

        input {
            border-radius: 3px;
        }

        .copyright {
            margin-top: 20px;
            text-align: center;
            font-size: 14px;
            color: #666;
        }

        .copyright img {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 5px;
            vertical-align: middle;
        }

        .copyright a {
            color: #1e88e5;
            text-decoration: none;
        }

        .copyright a:hover {
            text-decoration: underline;
        }

        .verify-btn {
            padding: 3px 8px;
            margin-left: 8px;
            cursor: pointer;
            border: none;
            border-radius: 3px;
            color: white;
            display: inline-block;
            font-size: 14px;
            line-height: 1.5;
            transition: background-color 0.3s;
        }

        .verify-btn.blue {
            background-color: #3498db;
            color: white;
        }

        .verify-btn.blue:hover {
            background-color: #2980b9;
        }

        .verify-btn.cyan {
            background-color: #1abc9c;
            color: white;
        }

        .verify-btn.cyan:hover {
            background-color: #16a085;
        }

        .verify-btn::after {
            content: attr(data-tooltip);
            visibility: hidden;
            opacity: 0;
            position: absolute;
            background-color: #333;
            color: #fff;
            padding: 5px 10px;
            border-radius: 3px;
            transition: opacity 0.3s;
        }

        .verify-btn:hover::after {
            visibility: visible;
            opacity: 1;
        }

        .model-filter-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .model-filter-container input[type="text"] {
            flex-grow: 1;
            margin-right: 10px;
        }

        .model-filter-container button {
            padding: 5px 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        .checkbox-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .checkbox-container label {
            display: flex;
            align-items: center;
        }

        .checkbox-container input[type="checkbox"] {
            margin-right: 5px;
        }

        .model-filter-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .model-filter-container input[type="text"] {
            flex-grow: 1;
            margin-right: 10px;
        }

        .model-filter-container button {
            padding: 5px 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin-right: 5px;
        }

        .model-filter-container button.clear {
            background-color: #f44336;
        }

        .checkbox-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .checkbox-container label {
            display: flex;
            align-items: center;
        }

        .checkbox-container input[type="checkbox"] {
            margin-right: 5px;
        }

        #modelList {
            max-height: 250px;
            overflow-y: auto;
        }

        .toast {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: #fff;
            color: #333;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 10px 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-radius: 5px;
            animation: slideIn 0.5s ease-out;
            max-width: 300px;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .toast p {
            margin: 0;
        }

        .toast button {
            background: none;
            border: none;
            cursor: pointer;
            color: #888;
        }

        .toast button:hover {
            color: #333;
        }

        .copyright {
            margin-top: 20px;
            text-align: center;
            font-size: 14px;
            color: #666;
        }

        .copyright img {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 5px;
            vertical-align: middle;
        }

        .copyright a {
            color: #1e88e5;
            text-decoration: none;
        }

        .copyright a:hover {
            text-decoration: underline;
        }

        .container {
            text-align: center;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #themeToggle {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        #themeToggle svg {
            width: 24px;
            height: 24px;
            transition: transform 0.3s;
            filter: drop-shadow(0 0 1px #000);
        }

        body.dark-mode #themeIcon {
            transform: rotate(180deg);
            filter: drop-shadow(0 0 4px #3f1);
        }
        body.dark-mode {
            background-color: #121212;
            color: #e0e0e0;
        }

        body.light-mode .verify-btn.blue {
            background-color: #3498db;
        }

        body.light-mode .verify-btn.blue:hover {
            background-color: #2980b9;
        }

        body.light-mode .verify-btn.cyan {
            background-color: #1abc9c;
        }

        body.light-mode .verify-btn.cyan:hover {
            background-color: #16a085;
        }

        body.light-mode .verify-btn.green,
        body.light-mode .verify-btn.yellow {
            background-color: #28a745;
        }

        body.light-mode .verify-btn.green:hover,
        body.light-mode .verify-btn.yellow:hover {
            background-color: #218838;
        }

        body.dark-mode .verify-btn.blue {
            background-color: #2196f3;
        }

        body.dark-mode .verify-btn.blue:hover {
            background-color: #1976d2;
        }

        body.dark-mode .verify-btn.cyan {
            background-color: #00bcd4;
        }

        body.dark-mode .verify-btn.cyan:hover {
            background-color: #0097a7;
        }

        body.dark-mode .verify-btn.green {
            background-color: #4caf50;
        }

        body.dark-mode .verify-btn.green:hover {
            background-color: #388e3c;
        }

        body.dark-mode .verify-btn.yellow {
            background-color: #ff9800;
        }

        body.dark-mode .verify-btn.yellow:hover {
            background-color: #f57c00;
        }

        .verify-btn::after {
            content: attr(data-tooltip);
            visibility: hidden;
            opacity: 0;
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            white-space: nowrap;
            transition: opacity 0.3s;
            z-index: 1000;
            margin-top: -25px;
            margin-left: -50%;
        }

        body.dark-mode .container, body.dark-mode .response-container {
            background-color: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(10px);
            color: #e0e0e0;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }

        body.dark-mode h1, body.dark-mode h2, body.dark-mode h3 {
            color: #1e88e5;
        }

        body.dark-mode input[type="text"], body.dark-mode textarea {
            background-color: #2e2e2e;
            color: #e0e0e0;
            border: 1px solid #1e88e5;
        }

        body.dark-mode th {
            background-color: #3e3e3e;
        }

        body.light-mode {
            background-color: #ffffff;
            color: #000000;
        }

        body.light-mode .container, body.light-mode .response-container {
            background-color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            color: #000000;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        body.light-mode h1, body.light-mode h2, body.light-mode h3 {
            color: #333333;
        }

        body.light-mode input[type="text"], body.light-mode textarea {
            background-color: #ffffff;
            color: #000000;
            border: 1px solid #cccccc;
        }

        body.light-mode th {
            background-color: #f1f1f1;
        }

        .modern-button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .modern-button.get-models {
            background-color: #fe9307;
            color: white;
            height: 100px;
        }

        .modern-button.save-api {
            background-color: #059669;
            color: white;
        }

        .modern-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .modern-button:active {
            transform: translateY(0);
        }

        .response-container {
            display: none;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;

        }

        .response-container.show {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .dark-mode .layui-layer-content {
            background-color: #333;
            color: #fff;
        }

        .dark-mode .layui-layer-title {
            background-color: #444;
            color: #fff;
        }

        .dark-mode .layui-layer-btn a {
            background-color: #555;
            color: #fff;
        }

        .dark-mode .layui-layer-btn .layui-layer-btn0 {
            background-color: #666;
            color: #fff;
        }

        th {
            color: #007bff;
        }

        body.dark-mode .layui-layer {
            background-color: #1e1e1e !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .layui-layer-title {
            background-color: #2d2d2d !important;
            color: #e0e0e0 !important;
            border-bottom: 1px solid #3d3d3d !important;
        }

        body.dark-mode .layui-layer-btn {
            background-color: #1e1e1e !important;
            border-top: 1px solid #3d3d3d !important;
        }

        body.dark-mode .layui-layer-btn a {
            background-color: #4a4a4a !important;
            color: #e0e0e0 !important;
            border: 1px solid #5a5a5a !important;
        }

        body.dark-mode .layui-layer-btn .layui-layer-btn0 {
            background-color: #1e88e5 !important;
            color: #ffffff !important;
        }

        body.dark-mode .layui-layer-content {
            background-color: #1e1e1e !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .layui-layer-loading {
            background-color: transparent !important;
        }

        body.dark-mode .layui-layer-dialog .layui-layer-content {
            color: #e0e0e0 !important;
        }

        body.dark-mode .layui-input {
            background-color: #2e2e2e !important;
            color: #e0e0e0 !important;
            border: 1px solid #3d3d3d !important;
        }

        body.dark-mode .layui-form-checkbox[lay-skin=primary] span {
            color: #e0e0e0 !important;
        }

        body.dark-mode .layui-form-checked[lay-skin=primary] i {
            border-color: #1e88e5 !important;
            background-color: #1e88e5 !important;
        }

        body.dark-mode #modelList {
            background-color: #1e1e1e !important;
        }

        body.dark-mode table {
            border-color: #3d3d3d !important;
        }

        body.dark-mode th {
            background-color: #2d2d2d !important;
            color: #1e88e5 !important;
            border-color: #3d3d3d !important;
        }

        body.dark-mode td {
            border-color: #3d3d3d !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode pre {
            background-color: #2e2e2e !important;
            border-color: #3d3d3d !important;
            color: #e0e0e0 !important;
        }

        body.light-mode .layui-layer {
            background-color: #ffffff !important;
            color: #000000 !important;
        }

        body.light-mode .layui-layer-title {
            background-color: #f8f8f8 !important;
            color: #000000 !important;
            border-bottom: 1px solid #eee !important;
        }

        body.light-mode .layui-layer-btn {
            background-color: #ffffff !important;
            border-top: 1px solid #eee !important;
        }

        body.light-mode .layui-layer-content {
            background-color: #ffffff !important;
            color: #000000 !important;
        }

        .response-container {
            transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
        }

        body.dark-mode #prefixFilter {
            background-color: #2e2e2e;
            color: #e0e0e0;
            border: 1px solid #3d3d3d;
        }

        body.dark-mode .model-filter-container button {
            background-color: #1e88e5;
            color: #ffffff;
        }

        body.dark-mode .model-filter-container button.clear {
            background-color: #d32f2f;
        }

        body.dark-mode .verify-btn {
            background-color: #1e88e5;
            color: #ffffff;
        }

        body.dark-mode .verify-btn:hover {
            background-color: #1976d2;
        }
        .copy-all-btn {
            background-color: #4CAF50; /* ç»¿è‰²èƒŒæ™¯ */
            border: none;
            color: white;
            padding: 8px 16px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 4px 2px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .copy-all-btn:hover {
            background-color: #45a049;
        }

        .model-name {
            display: flex;
            align-items: center;
        }

        .copy-icon {
            margin-left: 8px;
            cursor: pointer;
            font-size: 16px;
            color: #555;
            transition: color 0.3s;
        }

        .copy-icon:hover {
            color: #000;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <div>
            <button id="themeToggle" aria-label="toggle theme">
                <svg id="themeIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                     fill="transparent" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round" class="lucide lucide-sun">
                    <circle cx="12" cy="12" r="4"></circle>
                    <path d="M12 2v2"></path>
                    <path d="M12 20v2"></path>
                    <path d="m4.93 4.93 1.41 1.41"></path>
                    <path d="m17.66 17.66 1.41 1.41"></path>
                    <path d="M2 12h2"></path>
                    <path d="M20 12h2"></path>
                    <path d="m6.34 17.66-1.41 1.41"></path>
                    <path d="m19.07 4.93-1.41 1.41"></path>
                </svg>
            </button>
        </div>
    </div>
    <h1>API CHECKER</h1>
    <h3>ï¼ˆé€‚é… one-api/new-api ç­‰ä¸­è½¬æ ¼å¼ï¼‰</h3>

    <!-- æ·»åŠ ç¼“å­˜å¼€å…³å’Œä¸‹æ‹‰åˆ—è¡¨ -->
    <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; margin-top: 15px; gap: 15px;">
        <div style="display: flex; align-items: center; gap: 10px;">
            <label for="enableCache">å¯ç”¨æœ¬åœ°ç¼“å­˜</label>
            <input type="checkbox" id="enableCache" onchange="toggleCache(this.checked)">
        </div>

        <!-- å†å²è®°å½•ä¸‹æ‹‰åˆ—è¡¨ -->
        <div style="display: flex; align-items: center; gap: 10px; max-width: 50%;">
            <select id="history" style="width: 100%; max-width: 100%;" onchange="selectHistory(this)">
                <option value="">é€‰æ‹©ç¼“å­˜API</option>
            </select>
        </div>
    </div>
    <div class="button-container">
        <!-- ç¼“å­˜è®¾ç½®æŒ‰é’® -->
        <button type="button" class="button styled-button" onclick="importCacheFromFile()"> å¯¼å…¥APIæ–‡ä»¶ </button>
        <button type="button" class="button styled-button" onclick="exportCacheToFile()"> å¯¼å‡ºç¼“å­˜API </button>
        <button type="button" class="button styled-button" onclick="confirmDeleteSelectedCache()"> ä»ç¼“å­˜ä¸­åˆ é™¤å½“å‰APIä¿¡æ¯ </button>
        <button type="button" class="button styled-button" onclick="confirmClearAllCache()"> åˆ é™¤æ‰€æœ‰ç¼“å­˜ ï¼ï¼ï¼ </button>
    </div>
    <form id="apiForm">
        <textarea id="api_info" name="api_info"
                  placeholder="æ‡’äººä¸“ç”¨æ–‡æœ¬æ¡†ï¼Œæ”¯æŒåŒæ—¶ç²˜è´´æ¥å£åœ°å€å’Œå¯†é’¥ï¼Œæ™ºèƒ½æå–ï¼Œå¦‚ï¼šhttps://api.openai.comï¼Œsk-TodayIsThursdayVme50ForKFC"></textarea>
        <input type="text" id="api_url" name="api_url" placeholder="æ¥å£åœ°å€ï¼Œå¦‚ï¼šhttps://api.openai.com" value="">
        <input type="text" id="api_key" name="api_key" placeholder="å¯†é’¥ï¼Œå¦‚ï¼šsk-TodayIsThursdayVme50ForKFC" value="">
        <div class="model-input-container" id="model-input-container">
            <textarea type="text" id="model_name" name="model_name"
                      placeholder="æ”¯æŒæ‰‹åŠ¨å¡«å…¥æµ‹è¯•æ¨¡å‹åç§°ï¼Œç”¨è‹±æ–‡é€—å·åˆ†éš”å¤šä¸ªæ¨¡å‹"></textarea>
            <button type="button" class="modern-button get-models" onclick="getModelList()">è·å–æ¨¡å‹åˆ—è¡¨</button>
        </div>
        <div id="modelCheckboxes"></div>
        <div class="model-timeout-concurrency">
            <div class="model-timeout">
                <label for="model_timeout">è®¾ç½®è¯·æ±‚è¶…æ—¶(ç§’):</label>
                <input type="number" id="model_timeout" name="model_timeout" value="10" min="1"
                       style="max-width: 100px;">
            </div>
            <div class="model-concurrency">
                <label for="model_concurrency">è®¾ç½®è¯·æ±‚å¹¶å‘æ•°é‡:</label>
                <input type="number" id="model_concurrency" name="model_concurrency" value="5" min="1"
                       style="max-width: 100px;">
            </div>
        </div>
        <div class="submit-container">
            <input type="button" value="æµ‹è¯•æ¨¡å‹" onclick="testModels()" class="modern-button  submit-query">
            <input type="button" value="æ£€æŸ¥é¢åº¦" onclick="checkQuota()" class="modern-button check-quota">
            <input type="button" value="æ¸…ç©ºè¡¨å•" onclick="clearForm()" class="modern-button  clear-form">
        </div>
    </form>
</div>
<div class="copyright">
    <!--    ä¸è¦åˆ é™¤ æ„Ÿè°¢ Rick å’Œ Megasoft çš„è´¡çŒ®-->
    <p> Â© 2024 linuxdoer ç‰ˆæƒæ‰€æœ‰<br>ç‚¹ç‚¹star è‡ªè¡Œéƒ¨ç½² <a href="https://github.com/QAbot-zh/query-key" target="_blank">githubä»“åº“</a>
        <br>è´¡çŒ®è€…ï¼š<a href="https://linux.do/u/rick" target="_blank"><img
                src="https://linux.do/user_avatar/linux.do/rick/288/137821_2.png" alt="rick">rick </a><a
                href="https://linux.do/u/zhong_little" target="_blank"><img
                src="https://linux.do/user_avatar/linux.do/zhong_little/288/104887_2.png"
                alt="Megasoft">Megasoft</a><a
                href="https://linux.do/u/fangyuan99" target="_blank"><img
                src="https://linux.do/letter_avatar_proxy/v4/letter/f/b3f665/144.png"
                alt="fangyuan99">fangyuan99</a><a
                href="https://github.com/juzeon" target="_blank"><img
                src="https://avatars.githubusercontent.com/u/12206799?s=60&v=4" alt="juzeon">juzeon</a></p>
</div>
<div id="results" class="response-container"></div>

<script>
    // æ£€æµ‹æ˜¯å¦å¤„äºé»‘æš—æ¨¡å¼
    function detectDarkMode() {
        const isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (isDarkMode) {
            document.body.classList.add('dark-mode');
            document.body.classList.remove('light-mode');
        } else {
            document.body.classList.add('light-mode');
            document.body.classList.remove('dark-mode');
        }
        updateToastStyle(isDarkMode);
    }

    // åˆ‡æ¢ä¸»é¢˜
    function toggleTheme() {
        const isDarkMode = document.body.classList.contains('dark-mode');
        if (isDarkMode) {
            document.body.classList.remove('dark-mode');
            document.body.classList.add('light-mode');
            document.getElementById('themeIcon').innerHTML = `
                <circle cx="12" cy="12" r="4"></circle>
                <path d="M12 2v2"></path>
                <path d="M12 20v2"></path>
                <path d="m4.93 4.93 1.41 1.41"></path>
                <path d="m17.66 17.66 1.41 1.41"></path>
                <path d="M2 12h2"></path>
                <path d="M20 12h2"></path>
                <path d="m6.34 17.66-1.41 1.41"></path>
                <path d="m19.07 4.93-1.41 1.41"></path>
            `;
            // æ›´æ–°æŠ¥å‘ŠåŒºåŸŸæ ·å¼ä¸ºäº®è‰²æ¨¡å¼
            const resultsDiv = document.getElementById('results');
            if (resultsDiv) {
                resultsDiv.style.backgroundColor = '#ffffff';
                resultsDiv.style.color = '#000000';
                // æ›´æ–°è¡¨æ ¼ä¸­æ‰€æœ‰çš„ th å’Œ td è¾¹æ¡†é¢œè‰²
                resultsDiv.querySelectorAll('th, td').forEach(element => {
                    element.style.borderColor = '#ddd';
                });
                // æ›´æ–°è¡¨æ ¼æ ‡é¢˜èƒŒæ™¯è‰²
                resultsDiv.querySelectorAll('th').forEach(th => {
                    th.style.backgroundColor = '#f2f2f2';
                });
            }
        } else {
            document.body.classList.remove('light-mode');
            document.body.classList.add('dark-mode');
            document.getElementById('themeIcon').innerHTML = `
                <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
            `;
            // æ›´æ–°æŠ¥å‘ŠåŒºåŸŸæ ·å¼ä¸ºæš—è‰²æ¨¡å¼
            const resultsDiv = document.getElementById('results');
            if (resultsDiv) {
                resultsDiv.style.backgroundColor = '#2e2e2e';
                resultsDiv.style.color = '#e0e0e0';
                // æ›´æ–°è¡¨æ ¼ä¸­æ‰€æœ‰çš„ th å’Œ td è¾¹æ¡†é¢œè‰²
                resultsDiv.querySelectorAll('th, td').forEach(element => {
                    element.style.borderColor = '#555';
                });
                // æ›´æ–°è¡¨æ ¼æ ‡é¢˜èƒŒæ™¯è‰²
                resultsDiv.querySelectorAll('th').forEach(th => {
                    th.style.backgroundColor = '#3e3e3e';
                });
            }
        }
        updateToastStyle(!isDarkMode);
    }


    // æ›´æ–°å…¬å‘Šæ ·å¼
    function updateToastStyle(isDarkMode) {
        const toasts = document.querySelectorAll('.custom-toast, .custom-set-toast');
        toasts.forEach(toast => {
            if (isDarkMode) {
                toast.style.backgroundColor = 'rgba(30, 30, 30, 0.8)';
                toast.style.color = 'white';
                toast.style.boxShadow = '0 0 10px rgba(255, 255, 255, 0.1)';
            } else {
                toast.style.backgroundColor = 'rgba(255, 255, 255, 0.8)';
                toast.style.color = 'black';
                toast.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.1)';
            }
        });
    }

    // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        if (event.matches) {
            document.body.classList.add('dark-mode');
            document.body.classList.remove('light-mode');
            updateToastStyle(true);
        } else {
            document.body.classList.add('light-mode');
            document.body.classList.remove('dark-mode');
            updateToastStyle(false);
        }
    });

    // é¡µé¢åŠ è½½æ—¶æ£€æµ‹
    window.onload = function () {
        detectDarkMode();
        document.getElementById('themeToggle').addEventListener('click', toggleTheme);

        const enableCache = document.getElementById('enableCache');
        if (enableCache.checked) {
            historyDropdown.style.display = 'flex';
            importCacheFromFileButton.style.display = 'flex';
            exportCacheToFileButton.style.display = 'flex';
            deleteSelectedCacheButton.style.display = 'flex';
            clearAllCacheButton.style.display = 'flex';
        }
        else{
            historyDropdown.style.display = 'none';
            importCacheFromFileButton.style.display = 'none';
            exportCacheToFileButton.style.display = 'none';
            deleteSelectedCacheButton.style.display = 'none';
            clearAllCacheButton.style.display = 'none';
        }
    };
</script>
<script>
    // åœ¨é¡µé¢åŠ è½½æ—¶è°ƒç”¨getQueryParamså‡½æ•°è‡ªåŠ¨å¡«å……è¡¨å•
    document.addEventListener('DOMContentLoaded', () => {
        getQueryParams();
        detectDarkMode();
    });

    function getQueryParams() {
        const params = new URLSearchParams(window.location.search);
        const settings = params.get('settings');
        if (settings) {
            try {
                const settingsObj = JSON.parse(decodeURIComponent(settings));
                if (settingsObj.key) {
                    document.getElementById('api_key').value = settingsObj.key;
                }
                if (settingsObj.url) {
                    document.getElementById('api_url').value = settingsObj.url;
                }
                if (settingsObj.models) {
                    document.getElementById('model_name').value = settingsObj.models.join(',');
                }
                if (settingsObj.timeout) {
                    document.getElementById('model_timeout').value = settingsObj.timeout;
                }
                if (settingsObj.concurrency) {
                    document.getElementById('model_concurrency').value = settingsObj.concurrency;
                }
                if (!settingsObj.closeAnnouncement) {
                    showToast();
                }
                showSettingsToast();
            } catch (e) {
                console.error('è§£æURLå‚æ•°å¤±è´¥:', e);
            }
        } else {
            showToast();
        }
    }

    // æ˜¾ç¤ºè®¾ç½®å¼¹çª—
    function showSettingsToast() {
        const skMasked = document.getElementById('api_key').value.slice(0, 5) + '*****';

        const message = `
        <div>
            <p><strong>å·²å¡«å…¥é¢„åˆ¶è®¾ç½®</strong></p>
            <br>
            <div>ğŸ”‘ å¯†é’¥: ${skMasked}</div>
            <div>ğŸ”— æ¥å£åœ°å€: ${document.getElementById('api_url').value}</div>
            <div>ğŸ“¦ æ¨¡å‹: ${document.getElementById('model_name').value}</div>
            <div>â± è¯·æ±‚è¶…æ—¶: ${document.getElementById('model_timeout').value} ç§’</div>
            <div>ğŸ” å¹¶å‘æ•°é‡: ${document.getElementById('model_concurrency').value}</div>
        </div>
    `;
        const set_toast = document.createElement('div');
        set_toast.className = 'custom-set-toast';
        set_toast.innerHTML = `${message}`;
        // æ·»åŠ æ ·å¼ä½¿å…¶å±…ä¸­å¹¶æœ‰é«˜æ–¯æ¨¡ç³Šå’Œé€æ˜æ•ˆæœ
        set_toast.style.position = 'fixed';
        set_toast.style.top = '50%';
        set_toast.style.left = '50%';
        set_toast.style.transform = 'translate(-50%, -50%)';
        set_toast.style.backgroundColor = 'rgba(255, 255, 255, 0.7)';
        set_toast.style.backdropFilter = 'blur(10px)';
        set_toast.style.color = 'black';
        set_toast.style.padding = '20px';
        set_toast.style.borderRadius = '10px';
        set_toast.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.1)';
        set_toast.style.zIndex = '1000';
        set_toast.style.textAlign = 'center';

        // æ£€æµ‹é»‘æš—æ¨¡å¼
        const isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (isDarkMode) {
            set_toast.style.backgroundColor = 'rgba(30, 30, 30, 0.7)';
            set_toast.style.color = 'white';
            set_toast.style.boxShadow = '0 0 10px rgba(255, 255, 255, 0.1)';
        }

        document.body.appendChild(set_toast);

        // 2ç§’åè‡ªåŠ¨å…³é—­
        setTimeout(() => {
            set_toast.style.display = 'none';
        }, 2000);
    }

    // æ˜¾ç¤ºå…¬å‘Š
    function showToast() {
        const message = `
            <div>
                <p><strong>API CHECKER v${VERSION}</strong></p>
                <br>
                <div>ä»“åº“åœ°å€:  <a href="https://github.com/QAbot-zh/query-key" target="_blank" style="color: #1e88e5">QAbot-zh/query-key</a></div><div>ç‚¹ç‚¹ star å¯ä»¥è‡ªè¡Œéƒ¨ç½²</div>
                <br>
                <p><strong>å¦‚ä½•ä½¿ç”¨ :</strong></p>
                <ul>
                    <div>ğŸ•µï¸ ä½¿ç”¨â€œå®˜è½¬éªŒè¯â€åŠŸèƒ½ç¡®è®¤APIçš„çœŸå®æ€§</div>
                    <div>ğŸ§Š ä½¿ç”¨â€œæ¸©åº¦éªŒè¯â€åŠŸèƒ½ç¡®è®¤APIçš„ä¸€è‡´æ€§</div>
                    <div>ğŸ“Š ä½¿ç”¨â€œå‡½æ•°éªŒè¯â€åŠŸèƒ½æ£€æµ‹APIçš„FCæ”¯æŒ</div>
                    <div>ğŸ”’ <strong> <a href="https://github.com/QAbot-zh/query-key/tree/beta-feature/localStorage" target="_blank" style="color: #1e88e5"> beta åŠŸèƒ½</a>ï¼šæœ¬åœ°ç¼“å­˜APIä¿¡æ¯ï¼Œæ•°æ®ä»…æœ¬åœ°ä¿ç•™ï¼Œé»˜è®¤å…³é—­ï¼Œæ¬¢è¿éƒ¨ç½²</strong> </div>
                </ul>
            </div>
            <br>
            <p class="collapsible"><span class="triangle"></span> <strong>ç‰ˆæœ¬å†å²:</strong></p>
            <div class="content">
                <ul>
                    <div><a href="https://linux.do/t/topic/199694" target="_blank" style="color: #1e88e5">v1.4ç‰ˆæœ¬ä»‹ç»</a></div>
                    <div><a href="https://linux.do/t/topic/191420" target="_blank" style="color: #1e88e5">v1.3ç‰ˆæœ¬ä»‹ç»</a></div>
                    <div><a href="https://linux.do/t/topic/190955" target="_blank" style="color: #1e88e5">v1.2ç‰ˆæœ¬ä»‹ç»</a></div>
                    <div><a href="https://linux.do/t/topic/196537" target="_blank" style="color: #1e88e5">betaåŠŸèƒ½</a></div>
                </ul>
            </div>
            <br>
            <p class="collapsible"><span class="triangle"></span> <strong>Tips:</strong></p>
            <div class="content">
                <div>ğŸŒ± ä»…GPTç³»åˆ—ï¼Œå¯å®ç°å®˜è½¬éªŒè¯ï¼Œç³»ç»Ÿåˆ¤æ–­ä»…ä¾›å‚è€ƒï¼ŒåŸç†è¯·æŸ¥é˜… <a href="https://linux.do/t/topic/191420" target="_blank" style="color: #1e88e5">v1.3ç‰ˆæœ¬ä»‹ç»</a></div>
                <div>ğŸŒ¡ï¸ æ¸©åº¦éªŒè¯ï¼šä½æ¸©åº¦å‚æ•°ä¸‹ï¼Œå¤§æ¨¡å‹å›å¤çš„ç¨³å®šæ€§ã€‚æµ‹è¯•ç»“æœä»…ä¾›å‚è€ƒï¼ŒåŸç†è¯·æŸ¥é˜… <a href="https://linux.do/t/topic/195972" target="_blank" style="color: #1e88e5">æ¸©åº¦éªŒè¯</a></div>
            </div>
        </div>
    `;
        const toast = document.createElement('div');
        toast.className = 'custom-toast';
        toast.innerHTML = `${message}
                       <button onclick="this.parentElement.style.display='none';" aria-label="close">
                           <svg aria-hidden="true" viewBox="0 0 14 16" width="14" height="16">
                               <path fill-rule="evenodd" d="M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"></path>
                           </svg>
                       </button>`;
        document.body.appendChild(toast);

        // æ·»åŠ æ ·å¼
        const style = document.createElement('style');
        style.innerHTML = `
        .collapsible {
            cursor: pointer;
            user-select: none;
        }
        .content {
            display: none;
            overflow: hidden;
        }
        .triangle::before {
            content: "â–¶";
            display: inline-block;
            transform: rotate(0deg);
            transition: transform 0.3s;
        }
        .active .triangle::before {
            transform: rotate(90deg);
        }
        .custom-toast {
            position: fixed;
            top: 10px;
            right: -100%;
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            color: black;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            text-align: left;
            width: 300px;
            max-width: 50%;
            animation: slideIn 1s forwards;
        }
        .custom-toast button {
            background: none;
            border: none;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 10px;
        }
        .custom-toast button svg {
            fill: currentColor;
        }
        @keyframes slideIn {
            from {
                right: -100%;
            }
            to {
                right: 10px;
            }
        }
    `;
        document.head.appendChild(style);

        // æ£€æµ‹é»‘æš—æ¨¡å¼å¹¶æ·»åŠ æ ·å¼
        const isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        updateToastStyle(isDarkMode);

        // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            updateToastStyle(event.matches);
        });

        // æ·»åŠ æŠ˜å äº‹ä»¶
        const collapsibles = document.getElementsByClassName("collapsible");
        for (let i = 0; i < collapsibles.length; i++) {
            collapsibles[i].addEventListener("click", function () {
                this.classList.toggle("active");
                const content = this.nextElementSibling;
                if (content.style.display === "block") {
                    content.style.display = "none";
                } else {
                    content.style.display = "block";
                }
            });
        }
    }

    // æ™ºèƒ½æå–APIä¿¡æ¯
    document.getElementById('api_info').addEventListener('input', function () {
        let text = this.value;
        let urlPattern = /(https?:\/\/[^\sï¼Œã€‚ã€ï¼,ï¼›;\n]+)/;
        let keyPattern = /(sk-[a-zA-Z0-9]+)/;

        let urlMatch = text.match(urlPattern);
        let keyMatch = text.match(keyPattern);

        if (urlMatch) {
            //å»é™¤æœ«å°¾/åçš„ç©ºæ ¼ å…¶ä»–å­—ç¬¦ ä¿ç•™åˆ°æœ€åä¸€ä¸ª/å‰é¢
            let cleanUrl = urlMatch[0].match(/(.*)\/.*/)[1];
            //å¦‚æœ. å­˜åœ¨åˆ™ä½¿ç”¨
            if (cleanUrl.includes('.')) {
                document.getElementById('api_url').value = cleanUrl;
                console.log(cleanUrl);
            } else {
                document.getElementById('api_url').value = urlMatch[0];
                console.log(urlMatch[0]);
            }
        }
        if (keyMatch) {
            document.getElementById('api_key').value = keyMatch[0];
        }
    });

    // æœ¬åœ°ç¼“å­˜åŠŸèƒ½
    const CACHE_KEY = 'apiHistory';
    let cacheEnabled = false;
    // è·å–å†å²è®°å½•ç›¸å…³å…ƒç´ 
    var historyDropdown = document.getElementById('history');
    var importCacheFromFileButton = document.querySelector('.button-container button[onclick="importCacheFromFile()"]');
    var exportCacheToFileButton = document.querySelector('.button-container button[onclick="exportCacheToFile()"]');
    var deleteSelectedCacheButton = document.querySelector('.button-container button[onclick="confirmDeleteSelectedCache()"]');
    var clearAllCacheButton = document.querySelector('.button-container button[onclick="confirmClearAllCache()"]');
    
    function toggleCache(enabled) {
        cacheEnabled = enabled;
        if (enabled) {
            loadHistory();
            historyDropdown.style.display = 'flex';
            importCacheFromFileButton.style.display = 'flex';
            exportCacheToFileButton.style.display = 'flex';
            deleteSelectedCacheButton.style.display = 'flex';
            clearAllCacheButton.style.display = 'flex';
        } else {
            clearHistoryDropdown(); 
            historyDropdown.style.display = 'none';
            importCacheFromFileButton.style.display = 'none';
            exportCacheToFileButton.style.display = 'none';
            deleteSelectedCacheButton.style.display = 'none';
            clearAllCacheButton.style.display = 'none';
        }
    }
    function clearHistoryDropdown() {
        historyDropdown.innerHTML = '<option value="">é€‰æ‹©ç¼“å­˜API</option>'; 
    }

    function saveToCache(apiUrl, apiKey) {
        if (!cacheEnabled) return;

        const history = JSON.parse(localStorage.getItem(CACHE_KEY)) || [];
        const newEntry = { apiUrl, apiKey };

        if (!history.some(entry => entry.apiUrl === apiUrl && entry.apiKey === apiKey)) {
            history.push(newEntry);
            localStorage.setItem(CACHE_KEY, JSON.stringify(history));
            updateHistoryDropdown(history);
            console.log("apiä¿¡æ¯å·²ä¿å­˜åˆ°ç¼“å­˜:", apiUrl, apiKey.substring(0, 7) + '***');
        }
    }

    function loadHistory() {
        const history = JSON.parse(localStorage.getItem(CACHE_KEY)) || [];
        updateHistoryDropdown(history);
    }

    function updateHistoryDropdown(history) {
        historyDropdown.innerHTML = `<option value="">é€‰æ‹©ç¼“å­˜APIï¼ˆ${history.length}ï¼‰</option>`;

        if (history.length > 0) {
            history.forEach((entry, index) => {
                const option = document.createElement('option');
                option.value = `${entry.apiUrl}|${entry.apiKey}`;

                const maskedKey = entry.apiKey.substring(0, 7) + '***';
                option.text = `${entry.apiUrl} + ${maskedKey}`;

                option.setAttribute('data-index', index);
                historyDropdown.add(option);
            });
        }
    }

    function selectHistory(select) {
        if (select.value) {
            const [apiUrl, apiKey] = select.value.split('|');
            document.getElementById('api_url').value = apiUrl;
            document.getElementById('api_key').value = apiKey;
            document.getElementById('api_info').value = '';
        }
    }
    // æç¤ºç¼“å­˜æœªå¯ç”¨
    function showCacheNotEnabledAlert() {
        layui.use('layer', function(){
            var layer = layui.layer;
            layer.alert('ç¼“å­˜æœªå¯ç”¨ï¼Œæ— æ³•è¿›è¡Œæ­¤æ“ä½œã€‚', {icon: 0});
        });
    }
    // ç¡®è®¤åˆ é™¤å½“å‰APIç¼“å­˜
    function confirmDeleteSelectedCache() {
        if (!cacheEnabled) {
            showCacheNotEnabledAlert();
            return;
        }
        const selectedIndex = historyDropdown.selectedIndex;
        
        if (selectedIndex > 0) { // ç¡®ä¿ä¸æ˜¯é€‰æ‹©äº†é»˜è®¤çš„æç¤ºé¡¹
            const selectedApi = historyDropdown.options[selectedIndex].text; // è·å–é€‰ä¸­çš„APIä¿¡æ¯
            layui.use('layer', function(){
                var layer = layui.layer;
                layer.confirm(`ç¡®å®šè¦ä»ç¼“å­˜ä¸­åˆ é™¤ä»¥ä¸‹APIå—ï¼Ÿ<br><strong>${selectedApi}</strong><br>æ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼`, {
                    btn: ['ç¡®å®š', 'å–æ¶ˆ'] // æŒ‰é’®
                }, function(){
                    deleteSelectedCache();
                    layer.msg('å½“å‰APIç¼“å­˜å·²åˆ é™¤', {icon: 1});
                }, function(){
                    layer.msg('æ“ä½œå·²å–æ¶ˆ', {icon: 0});
                });
            });
        } else {
            layui.use('layer', function(){
                var layer = layui.layer;
                layer.msg('è¯·é€‰æ‹©è¦åˆ é™¤çš„API', {icon: 0});
            });
        }
    }

    // ç¡®è®¤åˆ é™¤æ‰€æœ‰ç¼“å­˜
    function confirmClearAllCache() {
        if (!cacheEnabled) {
            showCacheNotEnabledAlert();
            return;
        }
        layui.use('layer', function(){
            var layer = layui.layer;
            
            layer.confirm('ç¡®å®šè¦åˆ é™¤æ‰€æœ‰ç¼“å­˜å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼', {
                btn: ['ç¡®å®š', 'å–æ¶ˆ'] // æŒ‰é’®
            }, function(){
                clearAllCache();
                layer.msg('æ‰€æœ‰ç¼“å­˜å·²åˆ é™¤', {icon: 1});
            }, function(){
                layer.msg('æ“ä½œå·²å–æ¶ˆ', {icon: 0});
            });
        });
    }
    function deleteSelectedCache() {
        const selectedIndex = historyDropdown.selectedIndex;
        if (selectedIndex > 0) {  // ç¡®ä¿ä¸æ˜¯é€‰æ‹©äº†é»˜è®¤çš„æç¤ºé¡¹
            const history = JSON.parse(localStorage.getItem(CACHE_KEY)) || [];
            history.splice(selectedIndex - 1, 1);  // åˆ é™¤é€‰ä¸­é¡¹
            localStorage.setItem(CACHE_KEY, JSON.stringify(history));  // æ›´æ–°ç¼“å­˜
            loadHistory();  // é‡æ–°åŠ è½½ä¸‹æ‹‰åˆ—è¡¨
        }
    }

    function clearAllCache() {
        localStorage.removeItem(CACHE_KEY);  // åˆ é™¤æ‰€æœ‰ç¼“å­˜
        loadHistory();  // æ¸…ç©ºä¸‹æ‹‰åˆ—è¡¨
    }

    // å¯¼å‡ºæœ¬åœ°ç¼“å­˜åˆ°æ–‡ä»¶
    function exportCacheToFile() {
        const history = JSON.parse(localStorage.getItem(CACHE_KEY)) || []; // è·å–ç¼“å­˜æ•°æ®
        const fileContent = JSON.stringify(history, null, 2); // è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²
        const blob = new Blob([fileContent], { type: 'application/json' }); // åˆ›å»º Blob å¯¹è±¡
        const url = URL.createObjectURL(blob); // åˆ›å»ºä¸‹è½½é“¾æ¥
        // åˆ›å»ºä¸€ä¸ªä¸´æ—¶é“¾æ¥å…ƒç´ 
        const a = document.createElement('a');
        a.href = url;
        a.download = 'cache_api_keys.json'; // è®¾ç½®ä¸‹è½½æ–‡ä»¶å
        document.body.appendChild(a); // å°†é“¾æ¥æ·»åŠ åˆ°æ–‡æ¡£
        a.click(); // æ¨¡æ‹Ÿç‚¹å‡»ä¸‹è½½
        document.body.removeChild(a); // ä¸‹è½½åç§»é™¤é“¾æ¥
        URL.revokeObjectURL(url); // é‡Šæ”¾ URL å¯¹è±¡
    }

    // å¯¼å…¥æ–‡ä»¶åˆ°æœ¬åœ°ç¼“å­˜
    function importCacheFromFile() {
        // åˆ›å»ºæ–‡ä»¶è¾“å…¥å…ƒç´ 
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = 'application/json'; // åªæ¥å— JSON æ–‡ä»¶

        input.onchange = function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const fileContent = e.target.result;
                        const data = JSON.parse(fileContent);

                        // éªŒè¯æ–‡ä»¶å†…å®¹æ ¼å¼
                        if (Array.isArray(data) && data.every(item => typeof item.apiUrl === 'string' && typeof item.apiKey === 'string')) {
                            localStorage.setItem(CACHE_KEY, JSON.stringify(data));
                            loadHistory();
                            alert('ç¼“å­˜å¯¼å…¥æˆåŠŸ');
                        } else {
                            alert('æ–‡ä»¶å†…å®¹æ ¼å¼ä¸æ­£ç¡®');
                        }
                    } catch (error) {
                        alert('æ–‡ä»¶è§£æå¤±è´¥');
                    }
                };
                reader.readAsText(file);
            }
        };

        // æ¨¡æ‹Ÿç‚¹å‡»æ–‡ä»¶è¾“å…¥æ¡†
        input.click();
    }

    function getModelList() {
        const apiUrl = document.getElementById('api_url').value.replace(/\/+$/, '');
        const apiKey = document.getElementById('api_key').value;
        saveToCache(apiUrl, apiKey);

        layui.use('layer', function () {
            let layer = layui.layer;

            layer.load();
            fetch(`${apiUrl}/v1/models`, {
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json'
                }
            })
                .then(response => response.json())
                .then(data => {
                    layer.closeAll('loading');
                    const models = data.data.map(model => model.id);
                    models.sort();
                    displayModelCheckboxes(models);
                })
                .catch(error => {
                    layer.closeAll('loading');
                    console.error('Error in checkQuota:', error);
                    if(error.message.includes('Unexpected token')) {
                        layer.alert('æ£€æŸ¥é¢åº¦å¤±è´¥ï¼Œè¯·æ£€æŸ¥APIåœ°å€æˆ–å¯†é’¥æ˜¯å¦æ­£ç¡®');
                    }else {
                        layer.alert('æ£€æŸ¥é¢åº¦å¤±è´¥ï¼Œè¯·æ£€æŸ¥APIåœ°å€æˆ–å¯†é’¥æ˜¯å¦æ­£ç¡®');
                    }
                });
        });
    }

    // æ˜¾ç¤ºæ¨¡å‹å¤é€‰æ¡†
    function displayModelCheckboxes(models) {
        layui.use(['layer', 'form'], function () {
            let layer = layui.layer;
            let form = layui.form;

            let content = '<div style="padding: 20px;"><form class="layui-form">';
            content += '<div id="selectedCount">å·²é€‰æ‹© 0 ä¸ªæ¨¡å‹</div>';
            content += `
            <div class="model-filter-container">
                <input type="text" id="prefixFilter" placeholder="è¾“å…¥æ¨¡å‹å‰ç¼€ç­›é€‰">
                <button type="button" onclick="filterModels()">ç­›é€‰</button>
                <button type="button" class="clear" onclick="clearFilter()">æ¸…ç©º</button>
            </div>
            <div class="checkbox-container">
                <label><input type="checkbox" lay-skin="primary" lay-filter="checkAll" title="å…¨é€‰"></label>
                <label><input type="checkbox" lay-skin="primary" lay-filter="checkAllChatOnly" title="å…¨é€‰ï¼ˆè¿‡æ»¤éŸ³/å›¾/è§†/åµŒå…¥æ¨¡å‹ï¼‰"></label>
            </div>
        `;
            content += '<div id="modelList">';
            models.forEach((model, index) => {
                content += `
                <div class="layui-form-item model-item" data-model="${model}">
                    <input type="checkbox" name="models[${index}]" value="${model}" title="${model}" lay-skin="primary">
                </div>
            `;
            });
            content += '</div></form></div>';

            layer.open({
                type: 1,
                title: 'é€‰æ‹©æ¨¡å‹',
                content: content,
                area: ['400px', '550px'],
                btn: ['ç¡®å®š', 'å–æ¶ˆ'],
                success: function (layero, index) {
                    form.render('checkbox');
                    setupEventListeners(layero, form);

                    // æ£€æŸ¥é»‘æš—æ¨¡å¼
                    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                        layero[0].style.backgroundColor = '#121212';
                        layero[0].style.color = '#e0e0e0';
                    }
                },
                yes: function (index, layero) {
                    const selectedModels = layero.find('input[name^="models"]:checked').map(function () {
                        return this.value;
                    }).get();
                    document.getElementById('model_name').value = selectedModels.join(',');
                    layer.close(index);
                }
            });
        });
    }

    function setupEventListeners(layero, form) {
        form.on('checkbox', function (data) {
            updateSelectedCount(layero);
        });

        form.on('checkbox(checkAll)', function (data) {
            let child = layero.find('input[name^="models"]');
            child.each(function (index, item) {
                item.checked = data.elem.checked;
            });
            form.render('checkbox');
            updateSelectedCount(layero);
            layero.find('input[lay-filter="checkAllChatOnly"]').prop('checked', false);
        });

        form.on('checkbox(checkAllChatOnly)', function (data) {
            const child = layero.find('input[name^="models"]');
            const notChatPattern = /^(dall|mj|midjourney|stable-diffusion|playground|flux|swap_face|tts|whisper|text|emb|luma|vidu|pdf|suno|pika|chirp|domo|runway|cogvideo|babbage|davinci|gpt-4o-realtime)/;
            child.each(function (index, item) {
                const modelName = item.value;
                item.checked = data.elem.checked && !notChatPattern.test(modelName) && !/(image|audio|video|music|pdf|flux|suno|embed)/.test(modelName);
            });
            form.render('checkbox');
            updateSelectedCount(layero);
            layero.find('input[lay-filter="checkAll"]').prop('checked', false);
        });
    }

    function filterModels() {
        const prefix = document.getElementById('prefixFilter').value.trim().toLowerCase();
        const modelItems = document.querySelectorAll('.model-item');
        const modelList = document.getElementById('modelList');

        const matchedModels = [];
        const unmatchedModels = [];

        modelItems.forEach(item => {
            const model = item.getAttribute('data-model').toLowerCase();
            if (model.startsWith(prefix)) {
                matchedModels.push(item);
            } else {
                unmatchedModels.push(item);
            }
        });


        matchedModels.forEach(item => {
            modelList.insertBefore(item, modelList.firstChild);
            item.querySelector('input[type="checkbox"]').checked = true;
        });

        unmatchedModels.forEach(item => {
            modelList.appendChild(item);
        });

        layui.form.render('checkbox');
        let count = matchedModels.length;
        updateSelectedCount2(count);
    }

    function clearFilter() {
        document.getElementById('prefixFilter').value = '';
        const modelItems = document.querySelectorAll('.model-item');
        const modelList = document.getElementById('modelList');

        modelItems.forEach(item => {
            item.querySelector('input[type="checkbox"]').checked = false;
            modelList.appendChild(item);
        });

        layui.form.render('checkbox');
        updateSelectedCount2(0);
    }


    // æ›´æ–°å·²é€‰æ‹©çš„æ¨¡å‹æ•°é‡
    function updateSelectedCount(layero) {
        const selectedCount = layero.find('input[name^="models"]:checked').length;
        layero.find('#selectedCount').text(`å·²é€‰æ‹© ${selectedCount} ä¸ªæ¨¡å‹`);
    }

    function updateSelectedCount2(count) {
        document.querySelector('#selectedCount').innerText = `å·²é€‰æ‹© ${count} ä¸ªæ¨¡å‹`;
    }

    let results = {
        valid: [],
        invalid: [],
        inconsistent: [],
        awaitOfficialVerification: []
    };

    async function testModels() {
        results = {
            valid: [],
            invalid: [],
            inconsistent: [],
            awaitOfficialVerification: []
        };
        const apiUrl = document.getElementById('api_url').value.replace(/\/+$/, '');
        const apiKey = document.getElementById('api_key').value;
        saveToCache(apiUrl, apiKey);

        const modelNames = document.getElementById('model_name').value.split(',').map(m => m.trim()).filter(m => m);
        const timeout = parseInt(document.getElementById('model_timeout').value) * 1000; // è½¬æ¢ä¸ºæ¯«ç§’
        const concurrency = parseInt(document.getElementById('model_concurrency').value);

        if (modelNames.length === 0) {
            layui.use('layer', function () {
                const layer = layui.layer;

                layer.alert('è¯·è¾“å…¥è‡³å°‘ä¸€ä¸ªæ¨¡å‹åç§°æˆ–ä»åˆ—è¡¨ä¸­é€‰æ‹©æ¨¡å‹');
            });
            return;
        }

        layui.use('layer', function () {
            let layer = layui.layer;
            layer.load();


            async function testModel(model) {
                const controller = new AbortController();
                const id = setTimeout(() => controller.abort(), model.startsWith('o1-') ? timeout * 6 : timeout);
                const startTime = Date.now();

                let response_text;
                try {
                    const requestBody = {
                        model: model,
                        messages: [{role: "user", content: "å†™ä¸€ä¸ª10ä¸ªå­—çš„å†·ç¬‘è¯"}]
                    };
                    if (/^(gpt-|chatgpt-)/.test(model)) {
                        requestBody.seed = 331;
                    }
                    const response = await fetch(`${apiUrl}/v1/chat/completions`, {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${apiKey}`,
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(requestBody),
                        signal: controller.signal
                    });

                    const endTime = Date.now();
                    const responseTime = (endTime - startTime) / 1000; // è½¬æ¢ä¸ºç§’
                    let has_o1_reason = false;
                    if (response.ok) {
                        const data = await response.json();
                        const returnedModel = data.model || "no returned model "; // ç¡®ä¿ returnedModel æœ‰æ•ˆ
                        if (returnedModel.startsWith("o1-") && data?.usage?.completion_tokens_details?.reasoning_tokens>0){
                            has_o1_reason = true;
                        }
                        if (returnedModel === model) {
                            results.valid.push({model, responseTime, has_o1_reason});
                            if (/^(gpt-|chatgpt-)/.test(model)) {
                                if (data.system_fingerprint) {
                                    results.awaitOfficialVerification.push({
                                        model,
                                        system_fingerprint: data.system_fingerprint
                                    });
                                }
                            }
                            console.log(`æµ‹è¯• API èŠ‚ç‚¹ï¼š${apiUrl} æµ‹è¯•æ¨¡å‹ï¼š${model} æ¨¡å‹ä¸€è‡´ï¼Œå“åº”æ—¶é—´ï¼š${responseTime.toFixed(2)} ç§’`);
                        } else {
                            results.inconsistent.push({model, returnedModel, responseTime, has_o1_reason});
                            console.log(`æµ‹è¯• API èŠ‚ç‚¹ï¼š${apiUrl} æµ‹è¯•æ¨¡å‹ï¼š${model} æ¨¡å‹ä¸ä¸€è‡´ï¼ŒæœŸæœ›ï¼š${model}ï¼Œå®é™…ï¼š${returnedModel}ï¼Œå“åº”æ—¶é—´ï¼š${responseTime.toFixed(2)} ç§’`);
                        }
                    } else {
                        try {
                            const jsonResponse = await response.json();
                            response_text = jsonResponse.error.message;
                        } catch (jsonError) {
                            try {
                                response_text = await response.text();
                            } catch (textError) {
                                response_text = 'æ— æ³•è§£æå“åº”å†…å®¹';
                            }
                        }
                        results.invalid.push({model, response_text});
                        console.log(`æµ‹è¯• API èŠ‚ç‚¹ï¼š${apiUrl} æµ‹è¯•æ¨¡å‹ï¼š${model} æ¨¡å‹ä¸å¯ç”¨ï¼Œå“åº”ï¼š${response.status} ${response.statusText} ${response_text}`);
                    }
                } catch (error) {
                    if (error.name === 'AbortError') {
                        results.invalid.push({model, error: 'è¶…æ—¶'});
                        console.log(`æµ‹è¯• API èŠ‚ç‚¹ï¼š${apiUrl} æµ‹è¯•æ¨¡å‹ï¼š${model} æ¨¡å‹ä¸å¯ç”¨ï¼ˆè¶…æ—¶ï¼‰`);
                    } else {
                        results.invalid.push({model, error: error.message});
                        console.log(`æµ‹è¯• API èŠ‚ç‚¹ï¼š${apiUrl} æµ‹è¯•æ¨¡å‹ï¼š${model} æ¨¡å‹ä¸å¯ç”¨ï¼Œé”™è¯¯ï¼š${error.message}`);
                    }
                } finally {
                    clearTimeout(id);
                }
            }

            async function runBatch(models) {
                const promises = models.map(model =>
                    testModel(model).catch(error => {
                        console.error(`æµ‹è¯•æ¨¡å‹ ${model} æ—¶å‘ç”Ÿé”™è¯¯ï¼š${error.message}`);
                    })
                );
                await Promise.all(promises);
            }

            async function runAllTests() {
                for (let i = 0; i < modelNames.length; i += concurrency) {
                    const batch = modelNames.slice(i, i + concurrency);
                    await runBatch(batch);
                }

                layer.closeAll('loading');
                displayResults(results);
                showSummary(results);
            }

            runAllTests().catch(error => {
                layer.closeAll('loading');
                layer.alert('æµ‹è¯•æ¨¡å‹æ—¶å‘ç”Ÿé”™è¯¯: ' + error.message);
            });
        });
    }

    function showSummary(results) {
        const validCount = results.valid.length;
        const inconsistentCount = results.inconsistent.length;
        const invalidCount = results.invalid.length;
        const totalCount = validCount + inconsistentCount + invalidCount;

        layui.use('layer', function () {
            const layer = layui.layer;
            layer.alert(`æµ‹è¯•æ€»ç»“ï¼š<br>
                    æ€»å…±æµ‹è¯•äº† ${totalCount} ä¸ªæ¨¡å‹<br>
                    å…¶ä¸­ï¼š<br>
                    - ${validCount} ä¸ªæ¨¡å‹å¯ç”¨ä¸”ä¸€è‡´<br>
                    - ${inconsistentCount} ä¸ªæ¨¡å‹å¯ç”¨ä½†ä¸ä¸€è‡´<br>
                    - ${invalidCount} ä¸ªæ¨¡å‹ä¸å¯ç”¨`,
                {title: 'æµ‹è¯•ç»“æœæ€»ç»“'}
            );
        });
    }

    // æ˜¾ç¤ºæµ‹è¯•ç»“æœ
    function displayResults(results) {
        window.currentResults = results; // ä¿å­˜å½“å‰ç»“æœä»¥ä¾›å¤åˆ¶ä½¿ç”¨
        const resultsDiv = document.getElementById('results');

        // æ˜¾ç¤ºå®¹å™¨
        resultsDiv.classList.add('show'); // ä½¿ç”¨åŠ¨ç”»æ•ˆæœ

        let content = '<h2>&#128203;æµ‹è¯•æŠ¥å‘Š</h2>' +
            '<div class="copy-container">' +  // ä¿®æ”¹ç±»åä¸º copy-container
            '<button onclick="copyModels(\'valid\')" class="copy-all-btn">å¤åˆ¶ä¸€è‡´æ¨¡å‹</button>' +
            '<button onclick="copyModels(\'inconsistent\')" class="copy-all-btn">å¤åˆ¶å¯ç”¨æ¨¡å‹</button>' +
            '</div>' +

            '<table>' +
            '<tr>' +
            '<th class="td1">æ¨¡å‹çŠ¶æ€</th>' +
            '<th class="td2">æ¨¡å‹åç§° </th>' +
            '<th class="td3">å“åº”æ—¶é—´ (ç§’)</th>' +
            '<th class="td4">å¤‡æ³¨</th>' +
            '</tr>';

        // éå†å¹¶æ·»åŠ ç»“æœè¡Œ
        results.valid.forEach(function (r) {
            content += '<tr>' +
                '<td class="td1 td1-ok">ä¸€è‡´å¯ç”¨</td>' +
                '<td class="td2"><span class="model-name">' + r.model +
                ' <span class="copy-icon" onclick="copyText(\'' + r.model + '\')"></span></span></td>' +
                '<td class="td3">' + r.responseTime.toFixed(2) + '</td>';

            let verifyButtons = r.model.startsWith('o1-') ? 'o1æ¨¡å‹ä¸æ”¯æŒå‡½æ•°ã€æ¸©åº¦ã€ç§å­åŠŸèƒ½' : `
                <button class="verify-btn cyan" data-tooltip="æ ¡éªŒå‡½æ•°åŠŸèƒ½æ˜¯å¦å¯ç”¨,å°†å‘èµ·1æ¬¡è¯·æ±‚" onclick="verifyFunctionCalling('${r.model}')">
                    å‡½æ•°éªŒè¯
                </button>
            `;
            if (/^(gpt-|chatgpt-)/.test(r.model) || r.model.startsWith('claude-')) {
                let officialButtonClass = results.awaitOfficialVerification.some(item => item.model === r.model) ? "green" : "yellow";
                verifyButtons += `
                    <button class="verify-btn blue" data-tooltip="ä½æ¸©åº¦å‚æ•°ä¸‹é¢„æµ‹åºåˆ—ä¸‹ä¸€ä¸ªå€¼,å°†å‘èµ·4æ¬¡è¯·æ±‚" onclick="verifyTemperature('${r.model}')">
                        æ¸©åº¦éªŒè¯
                    </button>
                    ${/^(gpt-|chatgpt-)/.test(r.model) ? `
                        <button class="verify-btn ${officialButtonClass}" data-tooltip="ç›¸åŒç§å­å‚æ•°ä¸‹æ ¡éªŒå›å¤ç›¸ä¼¼æ€§å’Œç³»ç»ŸæŒ‡çº¹,å°†å‘èµ·4æ¬¡è¯·æ±‚" onclick="verifyOfficial('${r.model}')">
                            å®˜è½¬éªŒè¯
                        </button>
                    ` : ''}
                `;
            }
            let o1_response = '';
            if (r.model.startsWith('o1-')) {
                if (r.has_o1_reason) {
                    o1_response = `<span style="color: green; font-weight: bold;">è¿”å›å“åº”ä¸­åŒ…å«éç©º reasoning_tokensï¼Œapi å¯é </span>`;
                } else {
                    o1_response = `<span style="color: red; font-weight: bold;">è¿”å›å“åº”ä¸­ä¸åŒ…å« reasoning_tokens æˆ–ä¸ºç©ºï¼Œapi éå®˜</span>`;
                }
            }
            content += `<td class="td4"><div class="verify-btn-group">${verifyButtons}</div><br><div class="o1-response">${o1_response}</div></td>`;
        });

        results.inconsistent.forEach(function (r) {
            let verifyButtons = r.model.startsWith('o1-') ? 'o1æ¨¡å‹ä¸æ”¯æŒå‡½æ•°ã€æ¸©åº¦ã€ç§å­åŠŸèƒ½' : `
                <button class="verify-btn cyan" data-tooltip="æ ¡éªŒå‡½æ•°åŠŸèƒ½æ˜¯å¦å¯ç”¨,å°†å‘èµ·1æ¬¡è¯·æ±‚" onclick="verifyFunctionCalling('${r.model}')">
                    å‡½æ•°éªŒè¯
                </button>
            `
            if (/^(gpt-|chatgpt-)/.test(r.model) || r.model.startsWith('claude-')) {
                let officialButtonClass = results.awaitOfficialVerification.some(item => item.model === r.model) ? "green" : "yellow";
                verifyButtons += `
                    <button class="verify-btn blue" data-tooltip="ä½æ¸©åº¦å‚æ•°ä¸‹é¢„æµ‹åºåˆ—ä¸‹ä¸€ä¸ªå€¼,å°†å‘èµ·4æ¬¡è¯·æ±‚" onclick="verifyTemperature('${r.model}')">
                        æ¸©åº¦éªŒè¯
                    </button>
                    ${/^(gpt-|chatgpt-)/.test(r.model) ? `
                        <button class="verify-btn ${officialButtonClass}" data-tooltip="ç›¸åŒç§å­å‚æ•°ä¸‹æ ¡éªŒå›å¤ç›¸ä¼¼æ€§å’Œç³»ç»ŸæŒ‡çº¹,å°†å‘èµ·4æ¬¡è¯·æ±‚" onclick="verifyOfficial('${r.model}')">
                            å®˜è½¬éªŒè¯
                        </button>
                    ` : ''}
                `;
            }
            let highlightedReturnModel = r.returnedModel;
            if (r.returnedModel.startsWith(`${r.model}-`)) {
                highlightedReturnModel = `<span style="color: green; font-weight: bold;">${r.model}</span>${r.returnedModel.slice(r.model.length)}<br>å¯èƒ½æ˜¯å¸¦ç‰ˆæœ¬å·æ¨¡å‹æ˜ å°„`;
            }

            let o1_response = '';
            if (r.model.startsWith('o1-')) {
                if (r.has_o1_reason) {
                    o1_response = `<span style="color: green; font-weight: bold;">è¿”å›å“åº”ä¸­åŒ…å«éç©º reasoning_tokensï¼Œapi å¯é </span>`;
                } else {
                    o1_response = `<span style="color: red; font-weight: bold;">è¿”å›å“åº”ä¸­ä¸åŒ…å« reasoning_tokens æˆ–ä¸ºç©ºï¼Œapi éå®˜</span>`;
                }
            }
            content += `
                <tr>
                    <td class="td1 td1-no" >æœªåŒ¹é…/æ¨¡å‹æ˜ å°„</td>
                    <td class="td2">
                        <span class="copy-btn2"" onclick="copyText('${r.model}')">${r.model}</span>
                    </td>
                    <td class="td3">${r.responseTime.toFixed(2)}</td>
                    <td class="td4">
                    ${verifyButtons}
                        <br>
                        ${r.returnedModel ? 'è¿”å›æ¨¡å‹: ' + highlightedReturnModel : 'è¯¥æ¥å£æœªè¿”å›æ¨¡å‹åç§°'}
                        <br>
                        <div class="o1-response">${o1_response}</div>
                    </td>
                </tr>
            `;
        });

        results.invalid.forEach(function (r) {
            content += '<tr>' +
                '<td class="td1 td1-error">è°ƒç”¨å¤±è´¥</td>' +
                '<td class="td2"><span class="copy-btn2" onclick="copyText(\'' + r.model + '\')">' + r.model + '</span></td>' +
                '<td class="td3">-</td>' +
                '<td class="td4">' + (r.response_text || r.error) + '</td>' +
                '</tr>';
        });

        content += '</table>';
        resultsDiv.innerHTML = content;

        if (document.body.classList.contains('dark-mode')) {
            resultsDiv.style.backgroundColor = '#2e2e2e';
            resultsDiv.style.color = '#e0e0e0';
            resultsDiv.querySelectorAll('th, td').forEach(element => {
                element.style.borderColor = '#555';
            });
            resultsDiv.querySelectorAll('th').forEach(th => {
                th.style.backgroundColor = '#3e3e3e';
            });
        } else {
            resultsDiv.style.backgroundColor = '#ffffff';
            resultsDiv.style.color = '#000000';
            resultsDiv.querySelectorAll('th, td').forEach(element => {
                element.style.borderColor = '#ddd';
            });
            resultsDiv.querySelectorAll('th').forEach(th => {
                th.style.backgroundColor = '#f2f2f2';
            });
        }
    }

    function copyText(text) {
        navigator.clipboard.writeText(text).then(() => {
            // å¤åˆ¶æˆåŠŸï¼Œå¯ä»¥æç¤ºç”¨æˆ·
            alert(`"${text}" å·²å¤åˆ¶åˆ°å‰ªè´´æ¿`);
        }).catch(err => {
            console.error('å¤åˆ¶å¤±è´¥:', err);
        });
    }

    function copyModels(type) {
        let models = [];
        if (type === 'valid') {
            models = window.currentResults.valid.map(r => r.model);
        } else if (type === 'inconsistent') {
            models = window.currentResults.inconsistent.map(r => r.model);
            models = models.concat(window.currentResults.awaitOfficialVerification.map(r => r.model));
        }
        if (models.length === 0) {
            alert('æ²¡æœ‰å¯å¤åˆ¶çš„æ¨¡å‹');
            return;
        }
        const textToCopy = models.join('\n');
        navigator.clipboard.writeText(textToCopy).then(() => {
            alert(`å·²å¤åˆ¶ ${type === 'valid' ? 'ä¸€è‡´æ¨¡å‹' : 'å¯ç”¨æ¨¡å‹'} (${models.length}) ä¸ªåˆ°å‰ªè´´æ¿`);
        }).catch(err => {
            console.error('å¤åˆ¶å¤±è´¥:', err);
        });
    }

    async function verifyOfficial(model) {
        layui.use('layer', function () {
            const layer = layui.layer;
            layer.prompt({
                formType: 0,
                value: '888',
                title: 'è¯·è¾“å…¥seedå€¼ (1-900)',
                area: ['300px', '50px']
            }, function (seed, index) {
                layer.close(index);
                performOfficialVerification(model, parseInt(seed));

            });
        });
    }

    function findMostFrequent(arr) {
        const frequency = {};
        let maxCount = 0;
        let mostFrequentElement = null;

        for (const item of arr) {
            frequency[item] = (frequency[item] || 0) + 1;

            if (frequency[item] > maxCount) {
                maxCount = frequency[item];
                mostFrequentElement = item;
            }
        }

        return { element: mostFrequentElement, count: maxCount };
    }

    async function verifyTemperature(model) {
        layui.use("layer", function () {
            const layer = layui.layer;
            layer.load();
        });

        try {
            const results = await Promise.all(
                [1, 2, 3, 4].map(() => sendTemperatureVerificationRequest(model))
            );
            const responses = results.map((result) =>
                result.choices
                    ? result?.choices?.[0]?.message?.content?.trim()
                    : "è¯¥æ¬¡è°ƒç”¨å“åº”å¼‚å¸¸"
            );
            const referenceMap = {
                "gpt-4o-mini": 32,
                "gpt-4o": 59,
                "claude-3-5": 51,
                "claude-3.5": 51
            };
            const matchedKey = Object.keys(referenceMap).find(key => model.startsWith(key));
            let referenceValue = matchedKey ? referenceMap[matchedKey] : null;

            layui.use("layer", function () {
                const layer = layui.layer;
                layer.closeAll("loading");

                let message = `<strong>å½“å‰å¾…éªŒè¯æ¨¡å‹ï¼š${model}</strong><p>å‚è€ƒå€¼ï¼šc3.5 = 51(gcpæµ‹è¯•)ï¼Œgpt-4o = 59ï¼Œgpt-4o-mini = 32(azureæµ‹è¯•)</p>`;
                message +=
                    '<table style="width:100%; border-collapse: collapse; margin-bottom: 20px;">' +
                    '<tr><th style="border: 1px solid #ddd; padding: 4px;">æµ‹è¯•</th><th style="border: 1px solid #ddd; padding: 4px;">å“åº”</th></tr>';
                let hitReferenceCount = 0;
                let color;
                for (let i = 0; i < 4; i++) {
                    if (responses[i] === referenceValue) {
                        hitReferenceCount++;
                        color = "green";
                    } else if (responses[i] === "è¯¥æ¬¡è°ƒç”¨å“åº”å¤±è´¥") {
                        color = "red";
                    } else {
                        color = "black";
                    }
                    message +=
                        "<tr>" +
                        '<td style="border: 1px solid #ddd; padding: 4px;">æµ‹è¯• ' +
                        (i + 1) +
                        "</td>" +
                        `<td style="border: 1px solid #ddd; padding: 4px; color: ${color};">` +
                        responses[i] +
                        "</td>" +
                        "</tr>";
                }

                message += "</table><strong>ç»“è®ºï¼š</strong>";

                const frequencyCheckResult = findMostFrequent(responses);
                const diffentCount = frequencyCheckResult.count;

                if (diffentCount === responses.length) {
                    message += "æ‰€æœ‰å“åº”ç›¸åŒï¼Œå¯èƒ½æ˜¯å®˜æ–¹API";
                } else {
                    message += `å“åº”ç»“æœé‡å¤åº¦ï¼š${diffentCount}/${responses.length}`;
                    // æ£€æŸ¥æ¨¡å‹å‰ç¼€æ˜¯å¦ç¬¦åˆæ¡ä»¶
                    if (/^(gpt-4o|claude-3-5|claude-3.5)/.test(model)) {
                        message += `ï¼Œå‚è€ƒå€¼å‘½ä¸­ç‡ï¼š${hitReferenceCount}/${responses.length}`;
                    }
                    message += "ï¼Œå¯èƒ½ä¸æ˜¯å®˜æ–¹API";
                }

                message += "<br>";

                // å¼¹çª—é…ç½®
                const isMobile = window.innerWidth <= 768;
                const alertOptions = {
                    title: "æ¸©åº¦éªŒè¯ç»“æœï¼ˆ<strong>æ— å‚è€ƒå€¼æ¨¡å‹è¯·è‡ªè¡Œæ ¹æ®ç»“æœé‡å¤åº¦åˆ¤æ–­</strong>ï¼‰",
                    area: isMobile ? ['95%', '50%'] : ["650px", "400px"] // æ‰‹æœºè®¾å¤‡ä¸Šè®¾ç½®è¾ƒå°çš„å¼¹çª—å°ºå¯¸
                };

                layer.alert(message, alertOptions);
            });
        } catch (error) {
            console.error("Error in verifyTemperature:", error);
            layui.use("layer", function () {
                const layer = layui.layer;
                layer.closeAll("loading");
                layer.alert("éªŒè¯è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: " + error.message, {
                    title: "é”™è¯¯",
                });
            });
        }
    }

    async function sendTemperatureVerificationRequest(model) {
        const apiUrl = document
            .getElementById("api_url")
            .value.replace(/\/+$/, "");
        const apiKey = document.getElementById("api_key").value;
        try {
            const response = await fetch(`${apiUrl}/v1/chat/completions`, {
                method: "POST",
                headers: {
                    Authorization: `Bearer ${apiKey}`,
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    messages: [
                        {
                            role: "system",
                            content:
                                "You're an associative thinker. The user gives you a sequence of 6 numbers. Your task is to figure out and provide the 7th number directly, without explaining how you got there.",
                        },
                        {
                            role: "user",
                            content: "5, 15, 77, 19, 53, 54,",
                        },
                    ],
                    temperature: 0.01,
                    model: model,
                }),
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            return await response.json();
        } catch (error) {
            console.error("Error in sendTemperatureVerificationRequest:", error);
            return {error: error.message};
        }
    }

    async function performOfficialVerification(model, seed) {
        layui.use('layer', function () {
            const layer = layui.layer;
            layer.load();
        });

        try {
            const results = await Promise.all([1, 2, 3, 4].map(() => sendVerificationRequest(model, seed)));
            const texts = [];
            const fingerprints = [];

            for (let i = 0; i < results.length; i++) {
                if (results[i].error) {
                    console.error(`Error in request ${i + 1}:`, results[i].error);
                    layui.use('layer', function () {
                        const layer = layui.layer;
                        layer.closeAll('loading');
                        layer.alert(`è¯·æ±‚ ${i + 1} å¤±è´¥: ${results[i].error}`, {title: 'é”™è¯¯'});
                    });
                    return;
                }
                if (!results[i].choices?.[0]?.message?.content) {
                    console.error(`Invalid response structure in request ${i + 1}:`, results[i]);
                    layui.use('layer', function () {
                        const layer = layui.layer;
                        layer.closeAll('loading');
                        layer.alert(`è¯·æ±‚ ${i + 1} è¿”å›çš„æ•°æ®ç»“æ„æ— æ•ˆ`, {title: 'é”™è¯¯'});
                    });
                    return;
                }
                texts.push(results[i].choices[0].message.content);
                fingerprints.push(results[i].system_fingerprint || 'N/A');
            }

            const similarity = compareTextSimilarity(texts[0], texts[1], texts[2], texts[3]);

            layui.use('layer', function () {
                api_url = document.getElementById('api_url').value;
                const layer = layui.layer;
                layer.closeAll('loading');
                if (api_url === "https://api.openai.com") {
                    layer.alert("å®˜æ–¹APIä½ æ¥éªŒè¯ï¼Ÿ", {title: 'å®˜æ–¹API'});
                }
                let validFingerprintsCount = Object.values(fingerprints).filter(value => value !== 'N/A').length;
                let similarityCount = Object.values(similarity).filter(value => parseFloat(value) > 0.6).length;
                let lowSimilarityCount = Object.values(similarity).filter(value => parseFloat(value) < 0.1).length;

                let title = 'éªŒè¯ç»“æœ';
                let message = '';
                if (validFingerprintsCount >= 3 && similarityCount >= 3) {
                    title = 'æ­å–œä½ ï¼Œå¤§æ¦‚ç‡æ˜¯å®˜æ–¹APIå‘€ï¼';
                    message += '<strong>Tips: è¿™æ˜¯å®˜æ–¹APIï¼</strong>';
                } else if (validFingerprintsCount >= 2 && similarityCount >= 2) {
                    title = 'å¯èƒ½æ˜¯å®˜æ–¹API';
                    message += '<strong>Tips: åº”è¯¥æ˜¯å®˜æ–¹çš„</strong>';
                } else if (validFingerprintsCount <= 2 && lowSimilarityCount >= 2) {
                    title = 'å¯èƒ½æ˜¯å‡çš„';
                    message += '<strong>Tips: å‡çš„8</strong>';
                } else {
                    title = 'æ²¡æœ‰ç³»ç»ŸæŒ‡çº¹ä¸”å›ç­”ä¸€è‡´æ€§å·®ï¼Œåˆ™apiå¤§æ¦‚ç‡æ˜¯å‡çš„';
                    message += '<strong>Tips: ç»“æœä¸ç¡®å®šï¼Œè¯·è¿›ä¸€æ­¥éªŒè¯</strong>';
                }

                message += '<table style="width:100%; border-collapse: collapse; margin-bottom: 20px;">' +
                    '<tr><th style="border: 1px solid #ddd; padding: 8px;">æµ‹è¯•</th><th style="border: 1px solid #ddd; padding: 8px;">æ–‡æœ¬</th><th style="border: 1px solid #ddd; padding: 8px;">ç³»ç»ŸæŒ‡çº¹</th></tr>';

                for (let i = 0; i < 4; i++) {
                    message += '<tr>' +
                        '<td style="border: 1px solid #ddd; padding: 8px;">æµ‹è¯• ' + (i + 1) + '</td>' +
                        '<td style="border: 1px solid #ddd; padding: 8px;">' + texts[i] + '</td>' +
                        '<td style="border: 1px solid #ddd; padding: 8px;">' + fingerprints[i] + '</td>' +
                        '</tr>';
                }

                message += '</table>';

                message += 'ç›¸ä¼¼åº¦ç»“æœï¼š<br>' +
                    Object.entries(similarity).map(([key, value]) => `${key}: ${value}`).join('<br>');

                // å¼¹çª—é…ç½®
                const isMobile = window.innerWidth <= 768;
                const alertOptions = {
                    title: title,
                    area: isMobile ? ['95%', '60%'] : ['650px', '400px'], // æ‰‹æœºè®¾å¤‡ä¸Šè®¾ç½®è¾ƒå°çš„å¼¹çª—å°ºå¯¸
                    content: message,
                    shadeClose: true
                };

                layer.alert(message, alertOptions);
            });
        } catch (error) {
            console.error('Error in performOfficialVerification:', error);
            layui.use('layer', function () {
                const layer = layui.layer;
                layer.closeAll('loading');
                layer.alert('éªŒè¯è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: ' + error.message, {title: 'é”™è¯¯'});
            });
        }
    }

    async function sendVerificationRequest(model, seed) {
        const apiUrl = document.getElementById('api_url').value.replace(/\/+$/, '');
        const apiKey = document.getElementById('api_key').value;
        try {
            const response = await fetch(`${apiUrl}/v1/chat/completions`, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    messages: [
                        {
                            role: "user",
                            content: "å†™ä¸€ä¸ª10ä¸ªå­—çš„å†·ç¬‘è¯"
                        }
                    ],
                    seed: seed,
                    temperature: 0.7,
                    model: model
                })
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            return await response.json();
        } catch (error) {
            console.error('Error in sendVerificationRequest:', error);
            return {error: error.message};
        }
    }

    async function verifyFunctionCalling(model) {
        console.log("å¼€å§‹éªŒè¯å‡½æ•°è°ƒç”¨");
        layui.use('layer', function () {
            const layer = layui.layer;

            layer.open({
                title: 'è¯·è¾“å…¥ä¸¤ä¸ªæ•´æ•° a å’Œ b',
                area: ['400px', '250px'],
                content: `
                <div style="padding: 10px;">
                    <div style="margin-bottom: 10px;">
                        <label style="display: inline-block; width: 100px;">è¯·è¾“å…¥æ•´æ•° a:</label>
                        <input type="number" id="inputA" class="layui-input" style="width: 60px; display: inline-block;" value="3" placeholder="a">
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label style="display: inline-block; width: 100px;">è¯·è¾“å…¥æ•´æ•° b:</label>
                        <input type="number" id="inputB" class="layui-input" style="width: 60px; display: inline-block;" value="5" placeholder="b">
                    </div>
                </div>
            `,
                btn: ['ç¡®å®š', 'å–æ¶ˆ'],
                yes: function (index, layero) {
                    const a = parseInt(document.getElementById('inputA').value);
                    const b = parseInt(document.getElementById('inputB').value);

                    if (isNaN(a) || isNaN(b)) {
                        layer.msg('è¯·è¾“å…¥æœ‰æ•ˆçš„æ•´æ•° a å’Œ b');
                        return;
                    }

                    layer.close(index);
                    performFunctionCallingVerification(model, a, b);
                }
            });
        });
    }

    async function sendFunctionCallingRequest(model, a, b) {
        const apiUrl = document.getElementById('api_url').value.replace(/\/+$/, '');
        const apiKey = document.getElementById('api_key').value;
        try {
            const response = await fetch(`${apiUrl}/v1/chat/completions`, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    messages: [
                        {"role": "system", "content": "You are a helpful assistant."},
                        {"role": "user", "content": `Please add ${a} and ${b}.`}
                    ],
                    functions: [
                        {
                            "name": "add_numbers",
                            "description": "Adds two numbers together",
                            "parameters": {
                                "type": "object",
                                "properties": {
                                    "a": {
                                        "type": "number",
                                        "description": "The first number"
                                    },
                                    "b": {
                                        "type": "number",
                                        "description": "The second number"
                                    }
                                },
                                "required": ["a", "b"]
                            }
                        }
                    ],
                    function_call: "auto",
                    temperature: 0.5,
                    model: model
                })
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            return await response.json();
        } catch (error) {
            console.error('Error in sendFunctionCallingRequest:', error);
            return {error: error.message};
        }
    }

    async function performFunctionCallingVerification(model, a, b) {
        layui.use('layer', function () {
            const layer = layui.layer;
            layer.load();
        });

        try {
            const result = await sendFunctionCallingRequest(model, a, b);

            if (result.error) {
                console.error(`Error in request:`, result.error);
                layui.use('layer', function () {
                    const layer = layui.layer;
                    layer.closeAll('loading');
                    layer.alert(`è¯·æ±‚å¤±è´¥: ${result.error}`, {title: 'é”™è¯¯'});
                });
                return;
            }

            layui.use('layer', function () {
                const layer = layui.layer;
                layer.closeAll('loading');
                const title = '<b><span style="color: black;">æ¨¡å‹å‡½æ•°è°ƒç”¨å“åº”å¯¹æ¯”ï¼ˆéopenaiæ¨¡å‹çš„å‡½æ•°è°ƒç”¨å“åº”å¯èƒ½æœ‰å·®å¼‚ï¼Œä½†è‚‰çœ¼å¯è¾¨ï¼‰</span></b>';
                let text;
                // ç¬¬ä¸€ç§æ˜¯ openai çš„å‡½æ•°è°ƒç”¨å“åº”ï¼Œç¬¬äºŒç§æ˜¯ç» oneapi ä¸­è½¬å gemini çš„å‡½æ•°è°ƒç”¨å“åº”ï¼Œç›®å‰æ‰‹é‡Œåªæœ‰è¿™ä¸¤ç§æ”¯æŒ FC
                if(result.choices?.[0]?.finish_reason === 'function_call' || result.choices?.[0]?.message?.tool_calls?.[0]?.type === "function"){
                    text = '<b><span style="color: green;">æ¨¡å‹è¿”å›äº†å‡½æ•°è°ƒç”¨å“åº”ï¼Œæµ‹è¯•æ¨¡å‹ä¸ºï¼š' + model + '</span></b>';
                }
                else{
                    text = '<b><span style="color: red;">æ¨¡å‹æ— å‡½æ•°è°ƒç”¨å“åº”è¿”å›ï¼Œæµ‹è¯•æ¨¡å‹ä¸ºï¼š' + model + '</span></b>';
                }
                const referenceFunctionCall = JSON.stringify({
                    "index": 0,
                    "message": {
                        "role": "assistant",
                        "content": null,
                        "function_call": {
                            "name": "add_numbers",
                            "arguments": `{"a":${a},"b":${b}}`
                        },
                    },
                    "logprobs": null,
                    "finish_reason": "function_call",
                }, null, 4);
                const modelFunctionCall = JSON.stringify(result.choices?.[0], null, 4);
                const message = text + `
                    <table border="1" style="width: 100%; border-collapse: collapse; text-align: left;">
                        <thead>
                            <tr>
                                <th style="padding: 8px; background-color: #f2f2f2;">OpenAI æ ‡å‡†è¾“å‡ºå‚è€ƒ</th>
                                <th style="padding: 8px; background-color: #f2f2f2;">æµ‹è¯•æ¨¡å‹è¾“å‡º</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 8px;">
                                    <pre style="white-space: pre-wrap; word-wrap: break-word;">${referenceFunctionCall}</pre>
                                </td>
                                <td style="padding: 8px;">
                                    <pre style="white-space: pre-wrap; word-wrap: break-word;">${modelFunctionCall}</pre>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                `;
                const isMobile = window.innerWidth <= 768;
                const alertOptions = {
                    title: title,
                    area: isMobile ? ['95%', '80%'] : ['650px', '400px'], // æ‰‹æœºè®¾å¤‡ä¸Šè®¾ç½®è¾ƒå°çš„å¼¹çª—å°ºå¯¸
                    content: message,
                    shadeClose: true
                };

                layer.alert(message, alertOptions);
            });
        } catch (error) {
            console.error('Error in performFunctionCallingVerification:', error);
            layui.use('layer', function () {
                const layer = layui.layer;
                layer.closeAll('loading');
                const message = 'éªŒè¯è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: ' + error.message;
                const title = 'é”™è¯¯';
                const isMobile = window.innerWidth <= 768;
                const alertOptions = {
                    title: title,
                    area: isMobile ? ['95%', '80%'] : ['650px', '400px'], // æ‰‹æœºè®¾å¤‡ä¸Šè®¾ç½®è¾ƒå°çš„å¼¹çª—å°ºå¯¸
                    content: message,
                    shadeClose: true
                };

                layer.alert(message, alertOptions);
            });
        }
    }

    function compareTextSimilarity(text1, text2, text3, text4) {
        function calculateSimilarity(str1, str2) {
            const len1 = str1.length;
            const len2 = str2.length;
            const matrix = Array(len1 + 1).fill().map(() => Array(len2 + 1).fill(0));

            for (let i = 0; i <= len1; i++) matrix[i][0] = i;
            for (let j = 0; j <= len2; j++) matrix[0][j] = j;

            for (let i = 1; i <= len1; i++) {
                for (let j = 1; j <= len2; j++) {
                    const cost = str1[i - 1] === str2[j - 1] ? 0 : 1;
                    matrix[i][j] = Math.min(
                        matrix[i - 1][j] + 1,
                        matrix[i][j - 1] + 1,
                        matrix[i - 1][j - 1] + cost
                    );
                }
            }

            return 1 - matrix[len1][len2] / Math.max(len1, len2);
        }

        return {
            similarity12: calculateSimilarity(text1, text2).toFixed(4),
            similarity13: calculateSimilarity(text1, text3).toFixed(4),
            similarity14: calculateSimilarity(text1, text4).toFixed(4),
            similarity23: calculateSimilarity(text2, text3).toFixed(4),
            similarity24: calculateSimilarity(text2, text4).toFixed(4),
            similarity34: calculateSimilarity(text3, text4).toFixed(4)
        };
    }

    // æ£€æŸ¥é¢åº¦
    function checkQuota() {
        const apiUrl = document.getElementById('api_url').value.replace(/\/+$/, '');
        const apiKey = document.getElementById('api_key').value;

        layui.use('layer', function () {
            const layer = layui.layer;
            layer.load();

            let quotaInfo, usedInfo, remainInfo;

            // è·å–æ€»é¢åº¦
            fetch(`${apiUrl}/dashboard/billing/subscription`, {
                headers: {'Authorization': `Bearer ${apiKey}`}
            })
                .then(response => response.json())
                .then(quotaData => {
                    quotaInfo = quotaData.hard_limit_usd ? `${quotaData.hard_limit_usd.toFixed(2)} $` : 'æ— æ³•è·å¾—é¢åº¦ä¿¡æ¯';

                    // è·å–ä½¿ç”¨æƒ…å†µ
                    const today = new Date();
                    const year = today.getFullYear();
                    const month = String(today.getMonth() + 1).padStart(2, '0');
                    const day = String(today.getDate()).padStart(2, '0');
                    const startDate = `${year}-${month}-01`;
                    const endDate = `${year}-${month}-${day}`;

                    return fetch(`${apiUrl}/dashboard/billing/usage?start_date=${startDate}&end_date=${endDate}`, {
                        headers: {'Authorization': `Bearer ${apiKey}`}
                    });
                })
                .then(response => response.json())
                .then(usageData => {
                    usedInfo = `${(usageData.total_usage / 100).toFixed(2)} $`;

                    // è®¡ç®—å‰©ä½™é¢åº¦
                    const quotaNumber = parseFloat(quotaInfo);
                    const usedNumber = parseFloat(usedInfo);
                    if (!isNaN(quotaNumber) && !isNaN(usedNumber)) {
                        remainInfo = `${(quotaNumber - usedNumber).toFixed(2)} $`;
                    } else {
                        remainInfo = 'æ— æ³•è®¡ç®—å‰©ä½™é¢åº¦';
                    }

                    const showInfo = `å¯ç”¨é¢åº¦ä¸º: ${remainInfo}\n\nå·²ç”¨é¢åº¦ä¸º: ${usedInfo}\n\næ€»é¢åº¦ä¸º: ${quotaInfo}`;
                    layer.closeAll('loading');
                    // å¼¹çª—å†…å®¹
                    const content = `<div>${showInfo}</div>`;

                    const alertOptions = {
                        title: 'æ£€æŸ¥é¢åº¦',
                        area: ['300px', '200px']
                    };
                    layer.alert(content, alertOptions);
                })
                .catch(error => {
                    layer.closeAll('loading');
                    console.error('Error in checkQuota:', error);
                    if(error.message.includes('Unexpected token')) {
                        layer.alert('æ£€æŸ¥é¢åº¦å¤±è´¥ï¼Œè¯·æ£€æŸ¥APIåœ°å€æˆ–å¯†é’¥æ˜¯å¦æ­£ç¡®');
                    }else {
                        layer.alert('æ£€æŸ¥é¢åº¦å¤±è´¥');
                    }
                });
        });
    }

    // æ¸…ç©ºè¡¨å•
    function clearForm() {
        document.getElementById('apiForm').reset();
        document.getElementById('results').innerHTML = '';
        document.getElementById('history').selectedIndex = 0; 
    }

    // ä»£ç ç‰ˆæœ¬
    const VERSION = '1.5.0';
    const banner = `

    ___    ____  ____   ________  ________________ __ ______
   /   |  / __ \\/  _/  / ____/ / / / ____/ ____/ //_// ____/
  / /| | / /_/ // /   / /   / /_/ / __/ / /   / ,<  / __/
 / ___ |/ ____// /   / /___/ __  / /___/ /___/ /| |/ /___
/_/  |_/_/   /___/   \\____/_/ /_/_____/\\____/_/ |_/_____/



    `;
    const message = `hello ? ï¸`;
    console.log(`%c  API CHECK v${VERSION} %c  http://check.crond.dev `, "color: #fadfa3; background: #030307; padding:5px 0;", "background: #fadfa3; padding:5px 0;");
    console.log(banner);
    console.log(message +location.href);
    console.log("RICK: https://blog.rick.icu");
    console.log("Megasoft: https://linux.do/u/zhong_little");
</script>
</body>
</html>
